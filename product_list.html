<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product List - Arivu Foods Inventory</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container my-4 p-4 bg-white rounded-3 shadow-lg">
        <h2 class="mb-4 text-primary">Our Products</h2>
        <div class="input-group mb-3">
            <input type="text" class="form-control" id="productSearchInput" placeholder="Search products...">
            <button class="btn btn-outline-primary" type="button" id="productSearchButton">Search</button>
        </div>
        <div class="table-responsive">
            <table class="table table-hover table-striped border rounded-3 overflow-hidden">
                <thead class="bg-light">
                    <tr>
                        <th scope="col">Product ID</th>
                        <th scope="col">Product Name</th>
                        <th scope="col">Unit</th>
                        <th scope="col">Pack Size</th>
                        <th scope="col">MRP</th>
                    </tr>
                </thead>
                <tbody id="productListTableBody">
                    <!-- Example Static Row (will be replaced by JS) -->
                    <tr>
                        <td>AFCMA1KG</td>
                        <td>Low-Carb Multi Seeds Atta</td>
                        <td>kg</td>
                        <td>1.00</td>
                        <td>480.00</td>
                    </tr>
                    <tr>
                        <td>AFCMD1KG</td>
                        <td>Low-Carb Multi Seed Dosa Mix</td>
                        <td>Kg</td>
                        <td>1.00</td>
                        <td>480.00</td>
                    </tr>
                    <tr>
                        <td>AFCF1KG</td>
                        <td>Coconut Flour</td>
                        <td>Kg</td>
                        <td>1.00</td>
                        <td>480.00</td>
                    </tr>
                    <!-- More rows will be added dynamically by JavaScript -->
                </tbody>
            </table>
        </div>
        <p class="text-muted mt-3">Showing 3 of X products.</p>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Custom JavaScript for this page (if it were standalone) -->
    <script>
        // WHY: Load product data from backend API
        // WHAT: fetches /products endpoint and renders into table
        // HOW: call fetchProducts() on page load; remove or modify to roll back
        // Closes: #2
        document.addEventListener('DOMContentLoaded', () => {
            async function loadProducts() {
                const response = await fetch('http://localhost:8000/products');
                const products = await response.json();
                const tbody = document.getElementById('productListTableBody');
                tbody.innerHTML = '';
                products.forEach(product => {
                    const row = tbody.insertRow();
                    row.insertCell().textContent = product.product_id;
                    row.insertCell().textContent = product.product_name;
                    row.insertCell().textContent = product.unit_of_measure;
                    row.insertCell().textContent = product.standard_pack_size;
                    row.insertCell().textContent = product.mrp;
                });
            }
            loadProducts();
        });
    </script>
</body>
</html>
